# Use an official Python runtime as a parent image
FROM python:3.9-slim

# Set the working directory in the container
WORKDIR /app

# Install any needed packages specified in requirements.txt
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Install Google Cloud SDK
RUN apt-get update && apt-get install -y --no-install-recommends \
    curl \
    gnupg \
    lsb-release \
    && curl -sSL https://sdk.cloud.google.com | bash

# Add Google Cloud SDK binaries to PATH
ENV PATH $PATH:/root/google-cloud-sdk/bin

# Expose any ports the app is expecting in the container
# For example, if your pipeline runs a web server:
EXPOSE 8080

# Run app.py when the container launches
# For example, if your pipeline is invoked via a Python script:
CMD ["python", "pipeline.py"]
